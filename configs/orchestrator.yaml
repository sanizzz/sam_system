# Solace Agent Mesh Orchestrator Agent Configuration
# Based on preset/agents/basic/main_orchestrator.yaml - KEEP ALL SECTIONS

log:
  stdout_log_level: INFO
  log_file_level: INFO
  log_file: orchestrator-agent.log

# Shared SAM config
!include shared_config.yaml

apps:
  - name: orchestrator-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app
    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "OrchestratorAgent"
      display_name: "Orchestrator"
      model: *planning_model

      instruction: |
        You are Skillify's Orchestrator Agent - the central coordinator for an AI-powered lead generation system designed for freelancers.
        
        WHEN A USER PROVIDES THEIR FREELANCER TYPE AND LOCATION:
        
        Immediately begin the lead generation workflow:
        
        **Step 1: Lead Discovery**
        Delegate to LeadDiscoveryAgent with the freelancer type and location.
        "Finding local businesses in [location] that need [freelancer type] services..."
        
        **Step 2: Website Audits**  
        Once leads are returned, delegate to WebsiteAuditAgent to analyze each business.
        "Analyzing web presence for [X] businesses..."
        
        **Step 3: Pitch Creation**
        With audit results, delegate to PitchDraftingAgent to create personalized scripts.
        "Crafting personalized cold call pitches..."
        
        **Step 4: Final Compilation**
        Delegate to LeadAggregatorAgent to merge everything into a deliverable package.
        "Compiling your lead package..."
        
        SPECIALIZED AGENTS:
        - LeadDiscoveryAgent: Finds local businesses matching freelancer criteria
        - WebsiteAuditAgent: Analyzes websites for issues and opportunities  
        - PitchDraftingAgent: Creates tailored cold call scripts
        - LeadAggregatorAgent: Compiles final lead list with all data
        
        USER INTERACTION:
        - If user just says "hi" or asks what you do, explain Skillify briefly and ask for their freelancer type and location
        - Example prompt: "I'm a web developer in Austin, Texas" â†’ immediately start the workflow
        - Keep status updates conversational: "Great! Let me find some leads for you in Austin..."
        
        ARTIFACT HANDLING:
        - Use `signal_artifact_for_return` to deliver the final lead package to the user
        - Provide a summary of results after completion
        
        Keep the experience smooth and professional. The user should feel like they're getting real, actionable leads they can start calling today.

      inject_system_purpose: true
      inject_response_format: true
      inject_user_profile: true

      session_service:
        type: "${PERSISTENCE_TYPE, sql}"
        database_url: "${ORCHESTRATOR_DATABASE_URL, sqlite:///orchestrator-agent.db}"
        default_behavior: "PERSISTENT"

      artifact_service: *default_artifact_service
      artifact_handling_mode: "reference"
      enable_embed_resolution: true
      enable_artifact_content_instruction: true
      data_tools_config: *default_data_tools_config

      tools:
        - group_name: artifact_management
          tool_type: builtin-group
        - tool_type: builtin-group
          group_name: "data_analysis"

      agent_card:
        description: "The Orchestrator component. It manages tasks and coordinates multi-agent workflows."
        defaultInputModes: [text]
        defaultOutputModes: [text, file]
        skills:
        - id: strategic_planning
          name: Strategic Planning
          description: Analyzes complex requests and creates structured execution plans, breaking down multi-step goals into logical sequences with clear checkpoints and progress tracking.

        - id: agent_coordination
          name: Agent Coordination
          description: Identifies the most suitable specialized agents for specific tasks and coordinates multi-agent workflows, managing data handoffs and execution sequences to achieve complex objectives efficiently.

        - id: artifact_management
          name: Artifact Management
          description: Creates, transforms, and manages various artifact types including documents, reports, and data files, with capabilities for content generation, formatting, embedding dynamic data, and applying sophisticated data transformations.

      agent_card_publishing:
        interval_seconds: 10
      agent_discovery:
        enabled: true
      inter_agent_communication:
        allow_list: ["LeadDiscoveryAgent", "WebsiteAuditAgent", "PitchDraftingAgent", "LeadAggregatorAgent"]
        request_timeout_seconds: 600
